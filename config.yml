---
program_dir: "/opt/bench"

openblas_version: "0.3.21"
openblas_name: "OpenBLAS-{{ openblas_version }}"

hpl_version: "2.3"
hpl_name: "hpl-{{ hpl_version }}"

hpcg_version: "3-1-0"
hpcg_archive_name: "HPCG-release-{{ hpcg_version }}"
hpcg_name: "hpcg-{{ hpcg_archive_name }}"

compile_flags: "-Ofast -march=native -fno-stack-protector -z execstack -no-pie -fomit-frame-pointer -funroll-loops -ffast-math -ftree-vectorize"

ram_in_gb: "{{ ( ansible_memtotal_mb / 1024 * 0.75 ) | int | abs }}"

nodecount: "{{ ansible_play_hosts | length | int }}"

hpl_config:
  N: "{{ (((((ram_in_gb | int) * 1024 * 1024 * 1024 * (nodecount | int)) / 8) | root) * 0.90) | int }}"
  NB: 256
  P: 1
  Qs: 8
